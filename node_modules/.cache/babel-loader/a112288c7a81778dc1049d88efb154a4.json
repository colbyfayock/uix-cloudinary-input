{"ast":null,"code":"var _jsxFileName = \"/Users/colbyfayock/Code/uix-cloudinary-input/src/App.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$(),\n    _s5 = $RefreshSig$(),\n    _s6 = $RefreshSig$();\n\nimport React, { useLayoutEffect, useState, useEffect } from 'react';\nimport { Image, Video, Placeholder } from 'cloudinary-react';\nimport { Route, Switch, BrowserRouter } from 'react-router-dom';\nimport { Wrapper as ExtensionWrapper, useUiExtensionDialog, useUiExtension, FieldExtensionType, FieldExtensionFeature } from '@graphcms/uix-react-sdk';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction isMediaType(item) {\n  return Boolean(item) && 'public_id' in item && 'resource_type' in item;\n}\n\nfunction isMediaList(media) {\n  return Array.isArray(media) && media.length > 0 && media.every(item => isMediaType(item));\n} // useUiExtensionDialog hook accepts two type parameters:\n// 1. The return value type, will be null or undefined if nothing is returned; falls back to any\n\n\n// Typing the declaration will ensure correct types for the values returned by useUiExtension\nconst declaration = {\n  extensionType: 'field',\n  fieldType: FieldExtensionType.JSON,\n  name: 'Cloudinary asset',\n  description: 'Pick asset object in Cloudinary',\n  features: [// Enables rendering of a form field\n  FieldExtensionFeature.FieldRenderer, // Enables handling lists of values\n  // Don't forget to enable multiple values when creating a UI extension field in GraphCMS!\n  FieldExtensionFeature.ListRenderer, // Enables rendering in content table view\n  FieldExtensionFeature.TableRenderer],\n  // Optional fields that will when adding or updating a UI extension in GraphCMS\n  config: {\n    CLOUD_NAME: {\n      displayName: 'Cloudinary cloud name',\n      type: 'string',\n      required: true\n    },\n    API_KEY: {\n      displayName: 'Cloudinary public api key',\n      type: 'string',\n      required: true\n    }\n  }\n};\n\nfunction noop() {} // Treat the dialog as a separate extension and render it at a dedicated route\n// The dialog path you set here should later be passed as the first argument to the openDialog function\n\n\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(ExtensionWrapper, {\n    declaration: declaration,\n    children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          exact: true,\n          children: /*#__PURE__*/_jsxDEV(Extension, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/cloudinary\",\n          exact: true,\n          children: /*#__PURE__*/_jsxDEV(CloudinaryDialog, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_c = App;\n\nfunction Extension() {\n  _s();\n\n  // Pass a type parameter to useUiExtension hook for better developer experience\n  const {\n    isTableCell\n  } = useUiExtension(); // isTableCell can be used to detect whether the extension is currently rendered in content table\n\n  if (isTableCell) {\n    return /*#__PURE__*/_jsxDEV(TableCellRenderer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(FormFieldRenderer, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 10\n  }, this);\n}\n\n_s(Extension, \"95SQ8NMMVoZ1wBsp8hH0hWj5fRE=\", false, function () {\n  return [useUiExtension];\n});\n\n_c2 = Extension;\n\nfunction FormFieldRenderer() {\n  _s2();\n\n  const {\n    value: media,\n    // field.isList reveals whether a field handles multiple values\n    field: {\n      isList\n    },\n    onChange,\n    onFocus,\n    onBlur,\n    // expand opens a full-screen view\n    expand,\n    isExpanded,\n    openDialog,\n    extension: {\n      config\n    }\n  } = useUiExtension();\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  useEffect(() => {\n    setIsTransitioning(false);\n  }, [isExpanded]);\n  const [clickedMedia, setClickedMedia] = React.useState(); // Note that in a form, an empty field's initial value is an empty string\n\n  const showMedia = Array.isArray(media) ? media.length > 0 : Boolean(media);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-start',\n      padding: '10px',\n      opacity: isTransitioning ? 0 : 1\n    },\n    children: [isExpanded ? null : /*#__PURE__*/_jsxDEV(\"button\", {\n      style: {\n        cursor: 'pointer',\n        marginBottom: '10px',\n        boxSizing: 'border-box',\n        userSelect: 'none',\n        color: '#6663FD',\n        backgroundColor: '#F2F1FF',\n        textAlign: 'center',\n        lineHeight: '16px',\n        display: 'inline-flex',\n        border: '0px',\n        borderRadius: '4px',\n        fontWeight: 600,\n        fontFamily: 'Inter, -apple-system, system-ui, \"Segoe UI\", Helvetica, Arial, sans-serif',\n        fontSize: '14px',\n        verticalAlign: 'middle',\n        padding: '8px'\n      },\n      onClick: () => {\n        onFocus(); // openDialog accepts a route path as the first argument and,\n        // optionally, an object with props that will be passed to the dialog.\n        // These props will be returned by the useUiExtensionDialog hook\n        //\n\n        openDialog('/cloudinary', {\n          // By default, native GraphCMS dialogs have a maxWidth of 600px.\n          // You can overwrite it by passing a maxWidth prop\n          maxWidth: '90vw',\n          isList,\n          media // openDialog returns a Promise with the value that was passed to onCloseDialog\n\n        }).then(value => {\n          if (value) {\n            onChange(value);\n          }\n\n          onBlur();\n        });\n      },\n      children: \"Choose from Cloudinary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }, this), showMedia && (isMediaList(media) ? media.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        opacity: isExpanded && item.public_id !== (clickedMedia === null || clickedMedia === void 0 ? void 0 : clickedMedia.public_id) ? 0 : 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(FormAsset, {\n        cloudName: config.CLOUD_NAME,\n        media: item,\n        isExpanded: item.public_id === (clickedMedia === null || clickedMedia === void 0 ? void 0 : clickedMedia.public_id) && isExpanded,\n        onOpen: () => {\n          // expand accepts a boolean that will be accessible as isExpanded\n          expand(true);\n          setIsTransitioning(true);\n          setClickedMedia(item);\n        },\n        onClose: () => {\n          expand(false);\n          setIsTransitioning(true);\n          setClickedMedia(undefined);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          marginLeft: '10px',\n          cursor: 'pointer',\n          boxSizing: 'border-box',\n          userSelect: 'none',\n          color: '#6663FD',\n          backgroundColor: 'transparent',\n          textAlign: 'center',\n          lineHeight: '14px',\n          display: 'inline-flex',\n          border: '0px',\n          fontWeight: 500,\n          fontFamily: 'sans-serif',\n          fontSize: '12px',\n          verticalAlign: 'middle',\n          padding: '4px'\n        },\n        onClick: () => {\n          const newValues = media.filter(value => value.public_id !== item.public_id);\n          onChange(newValues);\n        },\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }, this)]\n    }, item.public_id + index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }, this)) : /*#__PURE__*/_jsxDEV(FormAsset, {\n      cloudName: config.CLOUD_NAME,\n      isExpanded: media.public_id === (clickedMedia === null || clickedMedia === void 0 ? void 0 : clickedMedia.public_id) && isExpanded,\n      onOpen: () => {\n        expand(true);\n        setIsTransitioning(true);\n        setClickedMedia(media);\n      },\n      onClose: () => {\n        expand(false);\n        setIsTransitioning(true);\n        setClickedMedia(undefined);\n      },\n      media: media\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(FormFieldRenderer, \"lWmyGVp10SrK9J7CSnesJDSqxus=\", false, function () {\n  return [useUiExtension];\n});\n\n_c3 = FormFieldRenderer;\n\nfunction TableCellRenderer() {\n  _s3();\n\n  const {\n    value: media,\n    isExpanded,\n    expand,\n    field: {\n      isList\n    },\n    extension: {\n      config\n    }\n  } = useUiExtension();\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  useEffect(() => {\n    setIsTransitioning(false);\n  }, [isExpanded]);\n\n  if (Array.isArray(media) ? media.length === 0 : Boolean(media) === false) {\n    return null;\n  }\n\n  if (isExpanded && isList) {\n    return /*#__PURE__*/_jsxDEV(TableAssetsPreviewModal, {\n      cloudName: config.CLOUD_NAME,\n      media: media,\n      closeModal: () => {\n        expand(false);\n        setIsTransitioning(true);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      opacity: isTransitioning ? 0 : 1\n    },\n    children: isMediaList(media) ? media.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 59,\n        height: 59,\n        marginRight: index === media.length - 1 ? 0 : 10\n      },\n      children: /*#__PURE__*/_jsxDEV(TableAsset, {\n        cloudName: config.CLOUD_NAME,\n        media: item,\n        onOpen: () => {\n          expand(true);\n          setIsTransitioning(true);\n        },\n        isExpanded: false,\n        onClose: noop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 13\n      }, this)\n    }, item.public_id + index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 11\n    }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 59,\n        height: 59\n      },\n      children: /*#__PURE__*/_jsxDEV(TableAsset, {\n        cloudName: config.CLOUD_NAME,\n        isExpanded: isExpanded,\n        onClose: () => {\n          expand(false);\n          setIsTransitioning(true);\n        },\n        onOpen: () => {\n          expand(true);\n          setIsTransitioning(true);\n        },\n        media: media\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 293,\n    columnNumber: 5\n  }, this);\n}\n\n_s3(TableCellRenderer, \"8P88k7PMpBI1YJ7KLArP6bqUlOw=\", false, function () {\n  return [useUiExtension];\n});\n\n_c4 = TableCellRenderer;\n\nfunction FormAsset(_ref) {\n  let {\n    media,\n    onOpen,\n    onClose,\n    isExpanded,\n    cloudName\n  } = _ref;\n\n  if (isExpanded) {\n    return /*#__PURE__*/_jsxDEV(FullScreenPreview, {\n      cloudName: cloudName,\n      media: media,\n      onClose: onClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this);\n  }\n\n  if (media.resource_type === 'image') return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: onOpen,\n    style: {\n      border: 'none',\n      outline: 'none',\n      background: 'transparent',\n      cursor: 'pointer'\n    },\n    children: /*#__PURE__*/_jsxDEV(Image, {\n      cloudName: cloudName,\n      publicId: media.public_id,\n      width: \"400\",\n      crop: \"scale\",\n      children: /*#__PURE__*/_jsxDEV(Placeholder, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 368,\n    columnNumber: 7\n  }, this);\n  if (media.resource_type === 'video') return /*#__PURE__*/_jsxDEV(Video, {\n    cloudName: cloudName,\n    publicId: media.public_id,\n    width: \"400\",\n    controls: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 390,\n    columnNumber: 7\n  }, this);\n  return null;\n}\n\n_c5 = FormAsset;\n\nfunction TableAsset(_ref2) {\n  let {\n    isExpanded,\n    media,\n    onOpen,\n    onClose,\n    cloudName,\n    style\n  } = _ref2;\n\n  if (isExpanded) {\n    return /*#__PURE__*/_jsxDEV(FullScreenPreview, {\n      media: media,\n      onClose: onClose,\n      cloudName: cloudName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    tabIndex: 0,\n    onClick: onOpen,\n    onKeyPress: e => {\n      if (e.key === 'Enter') {\n        onOpen();\n      }\n    },\n    style: {\n      width: 59,\n      height: 59,\n      flexShrink: 0,\n      ...style\n    },\n    children: media.resource_type === 'image' ? /*#__PURE__*/_jsxDEV(Image, {\n      publicId: media.public_id,\n      cloudName: cloudName,\n      width: \"auto\",\n      crop: \"scale\",\n      style: {\n        objectFit: 'cover',\n        width: '100%',\n        height: '100%',\n        cursor: 'pointer'\n      },\n      children: /*#__PURE__*/_jsxDEV(Placeholder, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 9\n    }, this) : media.resource_type === 'video' ? /*#__PURE__*/_jsxDEV(Video, {\n      cloudName: cloudName,\n      publicId: media.public_id,\n      width: \"auto\",\n      style: {\n        objectFit: 'cover',\n        width: '100%',\n        height: '100%',\n        cursor: 'pointer'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 9\n    }, this) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 427,\n    columnNumber: 5\n  }, this);\n}\n\n_c6 = TableAsset;\n\nfunction TableAssetsPreviewModal(_ref3) {\n  _s4();\n\n  let {\n    closeModal,\n    media,\n    cloudName\n  } = _ref3;\n  const [maximizedAsset, setMaximizedAsset] = useState(null);\n\n  if (maximizedAsset) {\n    return /*#__PURE__*/_jsxDEV(TableAsset, {\n      cloudName: cloudName,\n      media: maximizedAsset,\n      isExpanded: true,\n      onOpen: noop,\n      onClose: () => {\n        setMaximizedAsset(null);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"aria-modal\": \"true\",\n    role: \"dialog\",\n    style: {\n      position: 'fixed',\n      inset: 0,\n      display: 'flex'\n    },\n    onClick: closeModal,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: 'auto'\n      },\n      onClick: e => {\n        e.stopPropagation();\n      },\n      children: [/*#__PURE__*/_jsxDEV(CloseModalButton, {\n        closeModal: closeModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          borderRadius: '4px',\n          backgroundColor: 'white',\n          maxWidth: '800px',\n          maxHeight: '400px',\n          padding: '16px',\n          overflowY: 'auto'\n        },\n        children: media.map((item, index) => /*#__PURE__*/_jsxDEV(TableAsset, {\n          isExpanded: false,\n          cloudName: cloudName,\n          media: item,\n          onOpen: () => {\n            setMaximizedAsset(item);\n          },\n          onClose: () => {\n            setMaximizedAsset(null);\n          },\n          style: {\n            width: 250,\n            height: 200,\n            marginRight: index === media.length - 1 ? 0 : 16\n          }\n        }, item.public_id + index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 500,\n    columnNumber: 5\n  }, this);\n}\n\n_s4(TableAssetsPreviewModal, \"ZrIIrRHmKqmv5yOrJgmTUtOmNnY=\");\n\n_c7 = TableAssetsPreviewModal;\n\nfunction FullScreenPreview(_ref4) {\n  _s5();\n\n  let {\n    media,\n    cloudName,\n    onClose\n  } = _ref4;\n  useEffect(() => {\n    const handler = e => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    window.addEventListener('keyup', handler);\n    return () => {\n      window.removeEventListener('keyup', handler);\n    };\n  }, [onClose]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"aria-modal\": \"true\",\n    role: \"dialog\",\n    style: {\n      position: 'fixed',\n      inset: 0,\n      display: 'flex',\n      alignItems: 'center',\n      overflow: 'auto'\n    },\n    onClick: e => {\n      e.stopPropagation();\n      onClose();\n    },\n    children: [/*#__PURE__*/_jsxDEV(CloseModalButton, {\n      closeModal: onClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 7\n    }, this), media.resource_type === 'image' ? /*#__PURE__*/_jsxDEV(Image, {\n      cloudName: cloudName,\n      publicId: media.public_id,\n      width: \"auto\",\n      style: {\n        maxWidth: '100%',\n        margin: 'auto',\n        maxHeight: '100%'\n      },\n      crop: \"scale\",\n      children: /*#__PURE__*/_jsxDEV(Placeholder, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 9\n    }, this) : media.resource_type === 'video' ? /*#__PURE__*/_jsxDEV(Video, {\n      cloudName: cloudName,\n      publicId: media.public_id,\n      controls: true,\n      style: {\n        maxWidth: '70vw',\n        margin: 'auto',\n        maxHeight: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 575,\n    columnNumber: 5\n  }, this);\n}\n\n_s5(FullScreenPreview, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c8 = FullScreenPreview;\n\nfunction CloudinaryDialog() {\n  _s6();\n\n  const {\n    extension: {\n      config\n    }\n  } = useUiExtension(); // You can pass type parameters to useUiExtensionDialog\n  // onCloseDialog function is always returned from the hook\n\n  const {\n    onCloseDialog,\n    isList,\n    media\n  } = useUiExtensionDialog();\n  useLayoutEffect(() => {\n    // @ts-expect-error\n    const mediaLibrary = window.cloudinary.createMediaLibrary({\n      cloud_name: config.CLOUD_NAME,\n      api_key: config.API_KEY,\n      remove_header: false,\n      max_files: '10',\n      multiple: isList,\n      insert_caption: 'Add & close',\n      inline_container: '#cloudinary_dialog',\n      default_transformations: [[{\n        quality: 'auto'\n      }, {\n        fetch_format: 'auto'\n      }], [{\n        width: 80,\n        height: 80,\n        crop: 'fill',\n        gravity: 'auto',\n        radius: 'max'\n      }, {\n        fetch_format: 'auto',\n        quality: 'auto'\n      }]],\n      integration: {\n        type: 'graphcms_cloudinary_extension',\n        platform: 'graphcms',\n        version: 1.0,\n        environment: 'prod'\n      }\n    }, {\n      hideHandler: function () {\n        // To close the dialog without returning a value to the fields,\n        // call onCloseDialog with null or without an argument\n        onCloseDialog();\n      },\n      insertHandler: function (data) {\n        // Pass a single value to onCloseDialog to set it as the field value\n        // or an array, if the field handles multiple values\n        if (isList) {\n          if (isMediaList(media)) {\n            onCloseDialog([...media, ...data.assets]);\n          } else {\n            // initial field value is an empty string\n            const newArray = isMediaType(media) ? [media, ...data.assets] : data.assets;\n            onCloseDialog(newArray);\n          }\n        } else {\n          onCloseDialog(data.assets[0]);\n        }\n      }\n    });\n    mediaLibrary.show();\n  }, [config.API_KEY, config.CLOUD_NAME, isList, media, onCloseDialog]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"cloudinary_dialog\",\n    style: {\n      height: '800px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 683,\n    columnNumber: 5\n  }, this);\n}\n\n_s6(CloudinaryDialog, \"46UhNAEKMgSgI3e+MmXtmB8zis8=\", false, function () {\n  return [useUiExtension, useUiExtensionDialog];\n});\n\n_c9 = CloudinaryDialog;\n\nfunction CloseModalButton(_ref5) {\n  let {\n    closeModal\n  } = _ref5;\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    style: {\n      cursor: 'pointer',\n      userSelect: 'none',\n      backgroundColor: 'transparent',\n      textAlign: 'center',\n      lineHeight: '16px',\n      display: 'inline-flex',\n      border: '0px',\n      position: 'absolute',\n      right: '10px',\n      top: '10px',\n      fontWeight: 500,\n      background: 'white',\n      color: 'black',\n      fontSize: '16px',\n      borderRadius: '4px',\n      padding: '4px 8px',\n      verticalAlign: 'middle',\n      margin: 0\n    },\n    onClick: event => {\n      event.preventDefault();\n      event.stopPropagation();\n      closeModal();\n    },\n    onKeyPress: event => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      if (event.key === 'Enter') {\n        closeModal();\n      }\n    },\n    children: \"Close\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 694,\n    columnNumber: 5\n  }, this);\n}\n\n_c10 = CloseModalButton;\nexport default App;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"Extension\");\n$RefreshReg$(_c3, \"FormFieldRenderer\");\n$RefreshReg$(_c4, \"TableCellRenderer\");\n$RefreshReg$(_c5, \"FormAsset\");\n$RefreshReg$(_c6, \"TableAsset\");\n$RefreshReg$(_c7, \"TableAssetsPreviewModal\");\n$RefreshReg$(_c8, \"FullScreenPreview\");\n$RefreshReg$(_c9, \"CloudinaryDialog\");\n$RefreshReg$(_c10, \"CloseModalButton\");","map":{"version":3,"sources":["/Users/colbyfayock/Code/uix-cloudinary-input/src/App.tsx"],"names":["React","useLayoutEffect","useState","useEffect","Image","Video","Placeholder","Route","Switch","BrowserRouter","Wrapper","ExtensionWrapper","useUiExtensionDialog","useUiExtension","FieldExtensionType","FieldExtensionFeature","isMediaType","item","Boolean","isMediaList","media","Array","isArray","length","every","declaration","extensionType","fieldType","JSON","name","description","features","FieldRenderer","ListRenderer","TableRenderer","config","CLOUD_NAME","displayName","type","required","API_KEY","noop","App","Extension","isTableCell","FormFieldRenderer","value","field","isList","onChange","onFocus","onBlur","expand","isExpanded","openDialog","extension","isTransitioning","setIsTransitioning","clickedMedia","setClickedMedia","showMedia","display","flexDirection","alignItems","padding","opacity","cursor","marginBottom","boxSizing","userSelect","color","backgroundColor","textAlign","lineHeight","border","borderRadius","fontWeight","fontFamily","fontSize","verticalAlign","maxWidth","then","map","index","public_id","undefined","marginLeft","newValues","filter","TableCellRenderer","width","height","marginRight","FormAsset","onOpen","onClose","cloudName","resource_type","outline","background","TableAsset","style","e","key","flexShrink","objectFit","TableAssetsPreviewModal","closeModal","maximizedAsset","setMaximizedAsset","position","inset","margin","stopPropagation","maxHeight","overflowY","FullScreenPreview","handler","window","addEventListener","removeEventListener","overflow","CloudinaryDialog","onCloseDialog","mediaLibrary","cloudinary","createMediaLibrary","cloud_name","api_key","remove_header","max_files","multiple","insert_caption","inline_container","default_transformations","quality","fetch_format","crop","gravity","radius","integration","platform","version","environment","hideHandler","insertHandler","data","assets","newArray","show","CloseModalButton","right","top","event","preventDefault"],"mappings":"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","sourcesContent":["import React, { useLayoutEffect, useState, useEffect } from 'react';\nimport { Image, Video, Placeholder } from 'cloudinary-react';\nimport { Route, Switch, BrowserRouter } from 'react-router-dom';\nimport {\n  Wrapper as ExtensionWrapper,\n  useUiExtensionDialog,\n  useUiExtension,\n  FieldExtensionType,\n  FieldExtensionFeature,\n  FieldExtensionDeclaration,\n} from '@graphcms/uix-react-sdk';\n\ntype Media = {\n  public_id: string;\n  resource_type: string;\n};\n\nfunction isMediaType(item: any): item is Media {\n  return Boolean(item) && 'public_id' in item && 'resource_type' in item;\n}\nfunction isMediaList(media: Media | Media[] | string): media is Media[] {\n  return (\n    Array.isArray(media) &&\n    media.length > 0 &&\n    media.every((item) => isMediaType(item))\n  );\n}\n// useUiExtensionDialog hook accepts two type parameters:\n// 1. The return value type, will be null or undefined if nothing is returned; falls back to any\ntype DialogReturn = Media | Media[] | null;\n// 2. Optional props you'd like to access in the dialog\ntype DialogProps = { isList: boolean; media: Media | Media[] | '' };\n\n// Typing the declaration will ensure correct types for the values returned by useUiExtension\nconst declaration: FieldExtensionDeclaration = {\n  extensionType: 'field',\n  fieldType: FieldExtensionType.JSON,\n  name: 'Cloudinary asset',\n  description: 'Pick asset object in Cloudinary',\n  features: [\n    // Enables rendering of a form field\n    FieldExtensionFeature.FieldRenderer,\n    // Enables handling lists of values\n    // Don't forget to enable multiple values when creating a UI extension field in GraphCMS!\n    FieldExtensionFeature.ListRenderer,\n    // Enables rendering in content table view\n    FieldExtensionFeature.TableRenderer,\n  ],\n  // Optional fields that will when adding or updating a UI extension in GraphCMS\n  config: {\n    CLOUD_NAME: {\n      displayName: 'Cloudinary cloud name',\n      type: 'string',\n      required: true,\n    },\n    API_KEY: {\n      displayName: 'Cloudinary public api key',\n      type: 'string',\n      required: true,\n    },\n  },\n};\n\nfunction noop() {}\n\n// Treat the dialog as a separate extension and render it at a dedicated route\n// The dialog path you set here should later be passed as the first argument to the openDialog function\nfunction App() {\n  return (\n    <ExtensionWrapper declaration={declaration}>\n      <BrowserRouter>\n        <Switch>\n          <Route path=\"/\" exact>\n            <Extension />\n          </Route>\n          <Route path=\"/cloudinary\" exact>\n            <CloudinaryDialog />\n          </Route>\n        </Switch>\n      </BrowserRouter>\n    </ExtensionWrapper>\n  );\n}\n\nfunction Extension() {\n  // Pass a type parameter to useUiExtension hook for better developer experience\n  const { isTableCell } = useUiExtension<typeof declaration>();\n  // isTableCell can be used to detect whether the extension is currently rendered in content table\n  if (isTableCell) {\n    return <TableCellRenderer />;\n  }\n\n  return <FormFieldRenderer />;\n}\n\nfunction FormFieldRenderer() {\n  const {\n    value: media,\n    // field.isList reveals whether a field handles multiple values\n    field: { isList },\n    onChange,\n    onFocus,\n    onBlur,\n    // expand opens a full-screen view\n    expand,\n    isExpanded,\n    openDialog,\n    extension: { config },\n  } = useUiExtension<typeof declaration>();\n\n  const [isTransitioning, setIsTransitioning] = useState(false);\n\n  useEffect(() => {\n    setIsTransitioning(false);\n  }, [isExpanded]);\n\n  const [clickedMedia, setClickedMedia] = React.useState<Media>();\n  // Note that in a form, an empty field's initial value is an empty string\n  const showMedia = Array.isArray(media) ? media.length > 0 : Boolean(media);\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'flex-start',\n        padding: '10px',\n        opacity: isTransitioning ? 0 : 1,\n      }}\n    >\n      {isExpanded ? null : (\n        <button\n          style={{\n            cursor: 'pointer',\n            marginBottom: '10px',\n            boxSizing: 'border-box',\n            userSelect: 'none',\n            color: '#6663FD',\n            backgroundColor: '#F2F1FF',\n            textAlign: 'center',\n            lineHeight: '16px',\n            display: 'inline-flex',\n            border: '0px',\n            borderRadius: '4px',\n            fontWeight: 600,\n            fontFamily:\n              'Inter, -apple-system, system-ui, \"Segoe UI\", Helvetica, Arial, sans-serif',\n            fontSize: '14px',\n            verticalAlign: 'middle',\n            padding: '8px',\n          }}\n          onClick={() => {\n            onFocus();\n            // openDialog accepts a route path as the first argument and,\n            // optionally, an object with props that will be passed to the dialog.\n            // These props will be returned by the useUiExtensionDialog hook\n            //\n            openDialog<DialogReturn, DialogProps>('/cloudinary', {\n              // By default, native GraphCMS dialogs have a maxWidth of 600px.\n              // You can overwrite it by passing a maxWidth prop\n              maxWidth: '90vw',\n              isList,\n              media,\n              // openDialog returns a Promise with the value that was passed to onCloseDialog\n            }).then((value) => {\n              if (value) {\n                onChange(value);\n              }\n              onBlur();\n            });\n          }}\n        >\n          Choose from Cloudinary\n        </button>\n      )}\n      {showMedia &&\n        (isMediaList(media) ? (\n          media.map((item, index) => (\n            <div\n              style={{\n                display: 'flex',\n                flexDirection: 'row',\n                alignItems: 'flex-start',\n                opacity:\n                  isExpanded && item.public_id !== clickedMedia?.public_id\n                    ? 0\n                    : 1,\n              }}\n              key={item.public_id + index}\n            >\n              <FormAsset\n                cloudName={config.CLOUD_NAME}\n                media={item}\n                isExpanded={\n                  item.public_id === clickedMedia?.public_id && isExpanded\n                }\n                onOpen={() => {\n                  // expand accepts a boolean that will be accessible as isExpanded\n                  expand(true);\n                  setIsTransitioning(true);\n                  setClickedMedia(item);\n                }}\n                onClose={() => {\n                  expand(false);\n                  setIsTransitioning(true);\n                  setClickedMedia(undefined);\n                }}\n              />\n              <button\n                style={{\n                  marginLeft: '10px',\n                  cursor: 'pointer',\n                  boxSizing: 'border-box',\n                  userSelect: 'none',\n                  color: '#6663FD',\n                  backgroundColor: 'transparent',\n                  textAlign: 'center',\n                  lineHeight: '14px',\n                  display: 'inline-flex',\n                  border: '0px',\n                  fontWeight: 500,\n                  fontFamily: 'sans-serif',\n                  fontSize: '12px',\n                  verticalAlign: 'middle',\n                  padding: '4px',\n                }}\n                onClick={() => {\n                  const newValues = media.filter(\n                    (value) => value.public_id !== item.public_id\n                  );\n                  onChange(newValues);\n                }}\n              >\n                X\n              </button>\n            </div>\n          ))\n        ) : (\n          <FormAsset\n            cloudName={config.CLOUD_NAME}\n            isExpanded={\n              media.public_id === clickedMedia?.public_id && isExpanded\n            }\n            onOpen={() => {\n              expand(true);\n              setIsTransitioning(true);\n              setClickedMedia(media);\n            }}\n            onClose={() => {\n              expand(false);\n              setIsTransitioning(true);\n              setClickedMedia(undefined);\n            }}\n            media={media}\n          />\n        ))}\n    </div>\n  );\n}\n\nfunction TableCellRenderer() {\n  const {\n    value: media,\n    isExpanded,\n    expand,\n    field: { isList },\n    extension: { config },\n  } = useUiExtension<typeof declaration>();\n\n  const [isTransitioning, setIsTransitioning] = useState(false);\n\n  useEffect(() => {\n    setIsTransitioning(false);\n  }, [isExpanded]);\n\n  if (Array.isArray(media) ? media.length === 0 : Boolean(media) === false) {\n    return null;\n  }\n\n  if (isExpanded && isList) {\n    return (\n      <TableAssetsPreviewModal\n        cloudName={config.CLOUD_NAME}\n        media={media}\n        closeModal={() => {\n          expand(false);\n          setIsTransitioning(true);\n        }}\n      />\n    );\n  }\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        opacity: isTransitioning ? 0 : 1,\n      }}\n    >\n      {isMediaList(media) ? (\n        media.map((item: Media, index: number) => (\n          <div\n            key={item.public_id + index}\n            style={{\n              width: 59,\n              height: 59,\n              marginRight: index === media.length - 1 ? 0 : 10,\n            }}\n          >\n            <TableAsset\n              cloudName={config.CLOUD_NAME}\n              media={item}\n              onOpen={() => {\n                expand(true);\n                setIsTransitioning(true);\n              }}\n              isExpanded={false}\n              onClose={noop}\n            />\n          </div>\n        ))\n      ) : (\n        <div style={{ width: 59, height: 59 }}>\n          <TableAsset\n            cloudName={config.CLOUD_NAME}\n            isExpanded={isExpanded}\n            onClose={() => {\n              expand(false);\n              setIsTransitioning(true);\n            }}\n            onOpen={() => {\n              expand(true);\n              setIsTransitioning(true);\n            }}\n            media={media}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction FormAsset({\n  media,\n  onOpen,\n  onClose,\n  isExpanded,\n  cloudName,\n}: {\n  style?: React.CSSProperties;\n  isExpanded: boolean;\n  media: Media;\n  onOpen: () => void;\n  onClose: () => void;\n  cloudName: string;\n}) {\n  if (isExpanded) {\n    return (\n      <FullScreenPreview\n        cloudName={cloudName}\n        media={media}\n        onClose={onClose}\n      />\n    );\n  }\n\n  if (media.resource_type === 'image')\n    return (\n      <button\n        onClick={onOpen}\n        style={{\n          border: 'none',\n          outline: 'none',\n          background: 'transparent',\n          cursor: 'pointer',\n        }}\n      >\n        <Image\n          cloudName={cloudName}\n          publicId={media.public_id}\n          width=\"400\"\n          crop=\"scale\"\n        >\n          <Placeholder />\n        </Image>\n      </button>\n    );\n\n  if (media.resource_type === 'video')\n    return (\n      <Video\n        cloudName={cloudName}\n        publicId={media.public_id}\n        width=\"400\"\n        controls\n      />\n    );\n\n  return null;\n}\n\nfunction TableAsset({\n  isExpanded,\n  media,\n  onOpen,\n  onClose,\n  cloudName,\n  style,\n}: {\n  style?: React.CSSProperties;\n  isExpanded: boolean;\n  media: Media;\n  onOpen: () => void;\n  onClose: () => void;\n  cloudName: string;\n}) {\n  if (isExpanded) {\n    return (\n      <FullScreenPreview\n        media={media}\n        onClose={onClose}\n        cloudName={cloudName}\n      />\n    );\n  }\n\n  return (\n    <div\n      tabIndex={0}\n      onClick={onOpen}\n      onKeyPress={(e) => {\n        if (e.key === 'Enter') {\n          onOpen();\n        }\n      }}\n      style={{\n        width: 59,\n        height: 59,\n        flexShrink: 0,\n        ...style,\n      }}\n    >\n      {media.resource_type === 'image' ? (\n        <Image\n          publicId={media.public_id}\n          cloudName={cloudName}\n          width=\"auto\"\n          crop=\"scale\"\n          style={{\n            objectFit: 'cover',\n            width: '100%',\n            height: '100%',\n            cursor: 'pointer',\n          }}\n        >\n          <Placeholder />\n        </Image>\n      ) : media.resource_type === 'video' ? (\n        <Video\n          cloudName={cloudName}\n          publicId={media.public_id}\n          width=\"auto\"\n          style={{\n            objectFit: 'cover',\n            width: '100%',\n            height: '100%',\n            cursor: 'pointer',\n          }}\n        />\n      ) : null}\n    </div>\n  );\n}\n\nfunction TableAssetsPreviewModal({\n  closeModal,\n  media,\n  cloudName,\n}: {\n  media: Media[];\n  closeModal: () => void;\n  cloudName: string;\n}) {\n  const [maximizedAsset, setMaximizedAsset] = useState<Media | null>(null);\n\n  if (maximizedAsset) {\n    return (\n      <TableAsset\n        cloudName={cloudName}\n        media={maximizedAsset}\n        isExpanded\n        onOpen={noop}\n        onClose={() => {\n          setMaximizedAsset(null);\n        }}\n      />\n    );\n  }\n\n  return (\n    <div\n      aria-modal=\"true\"\n      role=\"dialog\"\n      style={{\n        position: 'fixed',\n        inset: 0,\n        display: 'flex',\n      }}\n      onClick={closeModal}\n    >\n      <div\n        style={{ margin: 'auto' }}\n        onClick={(e) => {\n          e.stopPropagation();\n        }}\n      >\n        <CloseModalButton closeModal={closeModal} />\n        <div\n          style={{\n            display: 'flex',\n            borderRadius: '4px',\n            backgroundColor: 'white',\n            maxWidth: '800px',\n            maxHeight: '400px',\n            padding: '16px',\n            overflowY: 'auto',\n          }}\n        >\n          {media.map((item, index) => (\n            <TableAsset\n              isExpanded={false}\n              cloudName={cloudName}\n              media={item}\n              key={item.public_id + index}\n              onOpen={() => {\n                setMaximizedAsset(item);\n              }}\n              onClose={() => {\n                setMaximizedAsset(null);\n              }}\n              style={{\n                width: 250,\n                height: 200,\n                marginRight: index === media.length - 1 ? 0 : 16,\n              }}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction FullScreenPreview({\n  media,\n  cloudName,\n  onClose,\n}: {\n  media: Media;\n  onClose: () => void;\n  cloudName: string;\n}) {\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n    window.addEventListener('keyup', handler);\n    return () => {\n      window.removeEventListener('keyup', handler);\n    };\n  }, [onClose]);\n\n  return (\n    <div\n      aria-modal=\"true\"\n      role=\"dialog\"\n      style={{\n        position: 'fixed',\n        inset: 0,\n        display: 'flex',\n        alignItems: 'center',\n        overflow: 'auto',\n      }}\n      onClick={(e) => {\n        e.stopPropagation();\n        onClose();\n      }}\n    >\n      <CloseModalButton closeModal={onClose} />\n      {media.resource_type === 'image' ? (\n        <Image\n          cloudName={cloudName}\n          publicId={media.public_id}\n          width=\"auto\"\n          style={{ maxWidth: '100%', margin: 'auto', maxHeight: '100%' }}\n          crop=\"scale\"\n        >\n          <Placeholder />\n        </Image>\n      ) : media.resource_type === 'video' ? (\n        <Video\n          cloudName={cloudName}\n          publicId={media.public_id}\n          controls\n          style={{ maxWidth: '70vw', margin: 'auto', maxHeight: '100%' }}\n        />\n      ) : null}\n    </div>\n  );\n}\n\nfunction CloudinaryDialog() {\n  const {\n    extension: { config },\n  } = useUiExtension<typeof declaration>();\n  // You can pass type parameters to useUiExtensionDialog\n  // onCloseDialog function is always returned from the hook\n  const { onCloseDialog, isList, media } = useUiExtensionDialog<\n    DialogReturn,\n    DialogProps\n  >();\n  useLayoutEffect(() => {\n    // @ts-expect-error\n    const mediaLibrary = window.cloudinary.createMediaLibrary(\n      {\n        cloud_name: config.CLOUD_NAME,\n        api_key: config.API_KEY,\n        remove_header: false,\n        max_files: '10',\n        multiple: isList,\n        insert_caption: 'Add & close',\n        inline_container: '#cloudinary_dialog',\n        default_transformations: [\n          [{ quality: 'auto' }, { fetch_format: 'auto' }],\n          [\n            {\n              width: 80,\n              height: 80,\n              crop: 'fill',\n              gravity: 'auto',\n              radius: 'max',\n            },\n            { fetch_format: 'auto', quality: 'auto' },\n          ],\n        ],\n        integration: {\n          type: 'graphcms_cloudinary_extension',\n          platform: 'graphcms',\n          version: 1.0,\n          environment: 'prod',\n        },\n      },\n      {\n        hideHandler: function () {\n          // To close the dialog without returning a value to the fields,\n          // call onCloseDialog with null or without an argument\n          onCloseDialog();\n        },\n        insertHandler: function (data: { assets: Media[] }) {\n          // Pass a single value to onCloseDialog to set it as the field value\n          // or an array, if the field handles multiple values\n          if (isList) {\n            if (isMediaList(media)) {\n              onCloseDialog([...media, ...data.assets]);\n            } else {\n              // initial field value is an empty string\n              const newArray = isMediaType(media)\n                ? [media, ...data.assets]\n                : data.assets;\n              onCloseDialog(newArray);\n            }\n          } else {\n            onCloseDialog(data.assets[0]);\n          }\n        },\n      }\n    );\n    mediaLibrary.show();\n  }, [config.API_KEY, config.CLOUD_NAME, isList, media, onCloseDialog]);\n\n  return (\n    <div\n      id=\"cloudinary_dialog\"\n      style={{\n        height: '800px',\n      }}\n    />\n  );\n}\n\nfunction CloseModalButton({ closeModal }: { closeModal: () => void }) {\n  return (\n    <button\n      type=\"button\"\n      style={{\n        cursor: 'pointer',\n        userSelect: 'none',\n        backgroundColor: 'transparent',\n        textAlign: 'center',\n        lineHeight: '16px',\n        display: 'inline-flex',\n        border: '0px',\n        position: 'absolute',\n        right: '10px',\n        top: '10px',\n        fontWeight: 500,\n        background: 'white',\n        color: 'black',\n        fontSize: '16px',\n        borderRadius: '4px',\n        padding: '4px 8px',\n        verticalAlign: 'middle',\n        margin: 0,\n      }}\n      onClick={(event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        closeModal();\n      }}\n      onKeyPress={(event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        if (event.key === 'Enter') {\n          closeModal();\n        }\n      }}\n    >\n      Close\n    </button>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}