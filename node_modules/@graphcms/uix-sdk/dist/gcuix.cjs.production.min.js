"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,o=(e=require("@graphcms/zoid/lib/zoid.js"))&&"object"==typeof e&&"default"in e?e.default:e;function n(e,o){if(null==e)return{};var n,i,r={},t=Object.keys(e);for(i=0;i<t.length;i++)o.indexOf(n=t[i])>=0||(r[n]=e[n]);return r}var i,r,t,s,d=["timeout","window","close","focus","resize","uid","cspNonce","getParent","getParentDomain","hide","show","export","onDisplay","onRendered","onRender","onClose","onDestroy","onResize","onFocus","onError","onProps"];!function(e){e.INPUT="INPUT",e.FORM="FORM",e.API="API"}(i||(i={})),(r=exports.FieldExtensionType||(exports.FieldExtensionType={})).STRING="STRING",r.RICHTEXT="RICHTEXT",r.INT="INT",r.FLOAT="FLOAT",r.BOOLEAN="BOOLEAN",r.JSON="JSON",r.DATETIME="DATETIME",r.DATE="DATE",r.LOCATION="LOCATION",r.COLOR="COLOR",r.ENUMERATION="ENUMERATION",r.RELATION="RELATION",r.ASSET="ASSET",r.UNION="UNION",(t=exports.FieldExtensionFeature||(exports.FieldExtensionFeature={})).FieldRenderer="FieldRenderer",t.ListRenderer="ListRenderer",t.TableRenderer="TableRenderer",(s=exports.VisibilityTypes||(exports.VisibilityTypes={})).READ_WRITE="READ_WRITE",s.READ_ONLY="READ_ONLY",s.HIDDEN="HIDDEN";var a=["onProps","onConnected","resize"],p=["onProps","onConnected"];function u(e){var o={};return Object.keys(e).forEach((function(n){d.includes(n)||(n.startsWith("_")&&d.includes(n.replace(/^_/g,""))?o[n.replace(/^_/g,"")]=e[n]:o[n]=e[n])})),o}function c(e){var i=e.debug,r=e.declaration,t=e.onProps,s=void 0===t?function(){}:t,d=e.uid;return new Promise((function(e,t){if("undefined"==typeof window||void 0===window.postMessage)return t({error:"unsupported_env",message:"Unsupported environment: Not in a browser supporting PostMessage"});var c=d||"undefined"!=typeof URLSearchParams&&new URLSearchParams(window.location.search).get("extensionUid");if(!c)return i&&console.error("[UIX] no uid found in init params or extension URL"),t({error:"missing_uid",message:"Missing UID: no UID found in init params or extension URL"});if(i&&console.info("[UIX:"+c+"] initializing with uid "+c),o.create({tag:c,url:window.location.href.toString(),autoResize:{width:!1,height:!0},props:{onConnected:{type:"function"}}}),void 0!==window.xprops){var l=window.xprops.onConnected;i&&console.info("[UIX:"+c+"] transmitting declaration",r),l(c,r).then((function(o){if(!0===o){var r=window.xprops,t=r.onProps,d=r.resize,l=n(r,a);i&&console.info("[UIX:"+c+"] initial shared props",l),t((function(e){var o=n(e,p);i&&console.info("[UIX:"+c+"] new shared props",o),"boolean"==typeof e.isExpanded&&d(e.isExpanded?{height:"full",width:"100%"}:{height:"auto",width:"100%"}),s(u(o))})),i&&console.info("[UIX:"+c+"] initialized"),s(u(l)),e({status:"ok",props:u(l)})}else i&&console.info("[UIX:"+c+"] sdk renderer returned status:",o),e({status:"validation"})}))}else i&&console.error("[UIX] no shared props from host found"),t({error:"failed_communication",message:"No communication established with host, please check your URL"})}))}exports.default={init:c},exports.init=c,exports.reservedExtensionProps=d;
//# sourceMappingURL=gcuix.cjs.production.min.js.map
