!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@graphcms/zoid/lib/zoid.js")):"function"==typeof define&&define.amd?define(["exports","@graphcms/zoid/lib/zoid.js"],n):n((e=e||self).GCUIX={},e.zoid)}(this,(function(e,n){"use strict";function o(e,n){if(null==e)return{};var o,i,r={},t=Object.keys(e);for(i=0;i<t.length;i++)n.indexOf(o=t[i])>=0||(r[o]=e[o]);return r}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var i,r,t,s,d=["timeout","window","close","focus","resize","uid","cspNonce","getParent","getParentDomain","hide","show","export","onDisplay","onRendered","onRender","onClose","onDestroy","onResize","onFocus","onError","onProps"];!function(e){e.INPUT="INPUT",e.FORM="FORM",e.API="API"}(i||(i={})),(r=e.FieldExtensionType||(e.FieldExtensionType={})).STRING="STRING",r.RICHTEXT="RICHTEXT",r.INT="INT",r.FLOAT="FLOAT",r.BOOLEAN="BOOLEAN",r.JSON="JSON",r.DATETIME="DATETIME",r.DATE="DATE",r.LOCATION="LOCATION",r.COLOR="COLOR",r.ENUMERATION="ENUMERATION",r.RELATION="RELATION",r.ASSET="ASSET",r.UNION="UNION",(t=e.FieldExtensionFeature||(e.FieldExtensionFeature={})).FieldRenderer="FieldRenderer",t.ListRenderer="ListRenderer",t.TableRenderer="TableRenderer",(s=e.VisibilityTypes||(e.VisibilityTypes={})).READ_WRITE="READ_WRITE",s.READ_ONLY="READ_ONLY",s.HIDDEN="HIDDEN";var a=["onProps","onConnected","resize"],u=["onProps","onConnected"];function p(e){var n={};return Object.keys(e).forEach((function(o){d.includes(o)||(o.startsWith("_")&&d.includes(o.replace(/^_/g,""))?n[o.replace(/^_/g,"")]=e[o]:n[o]=e[o])})),n}function c(e){var i=e.debug,r=e.declaration,t=e.onProps,s=void 0===t?function(){}:t,d=e.uid;return new Promise((function(e,t){if("undefined"==typeof window||void 0===window.postMessage)return t({error:"unsupported_env",message:"Unsupported environment: Not in a browser supporting PostMessage"});var c=d||"undefined"!=typeof URLSearchParams&&new URLSearchParams(window.location.search).get("extensionUid");if(!c)return i&&console.error("[UIX] no uid found in init params or extension URL"),t({error:"missing_uid",message:"Missing UID: no UID found in init params or extension URL"});if(i&&console.info("[UIX:"+c+"] initializing with uid "+c),n.create({tag:c,url:window.location.href.toString(),autoResize:{width:!1,height:!0},props:{onConnected:{type:"function"}}}),void 0!==window.xprops){var l=window.xprops.onConnected;i&&console.info("[UIX:"+c+"] transmitting declaration",r),l(c,r).then((function(n){if(!0===n){var r=window.xprops,t=r.onProps,d=r.resize,l=o(r,a);i&&console.info("[UIX:"+c+"] initial shared props",l),t((function(e){var n=o(e,u);i&&console.info("[UIX:"+c+"] new shared props",n),"boolean"==typeof e.isExpanded&&d(e.isExpanded?{height:"full",width:"100%"}:{height:"auto",width:"100%"}),s(p(n))})),i&&console.info("[UIX:"+c+"] initialized"),s(p(l)),e({status:"ok",props:p(l)})}else i&&console.info("[UIX:"+c+"] sdk renderer returned status:",n),e({status:"validation"})}))}else i&&console.error("[UIX] no shared props from host found"),t({error:"failed_communication",message:"No communication established with host, please check your URL"})}))}e.default={init:c},e.init=c,e.reservedExtensionProps=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=gcuix.umd.production.min.js.map
